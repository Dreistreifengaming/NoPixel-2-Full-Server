$engine: 3
$onesync: on
name: Nopixel
version: 1.0.0
author: The Community
description: A FiveM core with a load of bloat.

tasks:
  #  Download Base Files
  - action: download_github
    src: https://github.com/h04X-2K/NoPixelServer.git
    ref: main
    dest: ./tmp/nopixel

  - action: move_path
    src: ./tmp/nopixel/server.cfg
    dest: ./server.cfg

  - action: move_path
    src: ./tmp/nopixel/Sway-Coords.txt
    dest: ./Sway-Coords.txt

  - action: move_path
    src: ./tmp/nopixel/favicon96x96.png
    dest: ./favicon96x96.png

  - action: move_path
    src: ./tmp/nopixel/icudtl.dat
    dest: ./icudtl.dat

  - action: move_path
    src: ./tmp/nopixel/imqui.ini
    dest: ./imqui.ini

  - action: move_path
    src: ./tmp/nopixel/resources.cfg
    dest: ./resources.cfg

  - action: move_path
    src: ./tmp/nopixel/set-passwords.bat
    dest: ./set-passwords.bat

  # Prepare Database
  - action: connect_database
  - action: query_database
    file: ./tmp/nopixel.sql

  # Resources
  - action: download_github
    src: https://github.com/citizenfx/cfx-server-data
    subpath: resources
    dest: ./resources/[cfx-default]

  - action: download_github
    dest: ./resources
    ref: master
    src: https://github.com/h04X-2K/NoPixelServer/tree/main/resources

  - action: waste_time # prevent github throttling
    seconds: 10

  # Clean up
  - action: remove_path
    path: ./tmp